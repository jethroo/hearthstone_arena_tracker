<h2>Add a match with one click!</h1>

<table>
  <thead>
    <tr>
      <th class="opponent"></th>
      <% Arena::HEROS.each do |hero| %>
        <th class="opponent"><%= hero.capitalize %> </th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th class="opponent">Win</th>
      <% Arena::HEROS.each do |hero| %>
        <td class="match_win"><%= link_to image_tag("heroes/#{hero}_small_circle.png"), create_remote_match_path(hero: hero, win: true), remote: true %></td>
      <% end %>
    </tr>
    <tr>
      <th class="opponent">Loose</th>
      <% Arena::HEROS.each do |hero| %>
        <td class="match_loose"><%= link_to image_tag("heroes/#{hero}_small_circle.png"), create_remote_match_path(hero: hero, win: false), remote: true %></td>
      <% end %>
    </tr>
  </tbody>
</table>

<h2>Your Matches</h1>

<div id="error"/>

<div>
  <table>
    <thead>
      <tr>
        <th width="100">Result</th>
        <th width="200">Opponent</th>
        <th width="200">Created at</th>
      </tr>
    </thead>
    <tbody id="my_matches">
    </tbody>
  </table>
</div>

<script>
  $(document).ready(
    function(){
      $(".match_win a")
        .bind("ajax:success", function(evt, data, status, xhr){
                                $("#my_matches").append(data);
                              })
        .bind("ajax:error", function(evt, data, status, xhr){
                              $("#error").text(data);
                            }
      );
      $(".match_loose a")
        .bind("ajax:success", function(evt, data, status, xhr){
                                $("#my_matches").append(data);
                              })
        .bind("ajax:error", function(evt, data, status, xhr){
                              $("#error").text(data);
                            }
      );
  }
  );
</script>
